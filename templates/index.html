<!--
Copyright 2017 DevX Labs
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
{% load static %}
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://www.marcoguglie.it/Codepen/AnimatedHeaderBg/demo-1/js/EasePack.min.js"></script>
    <script src="https://www.marcoguglie.it/Codepen/AnimatedHeaderBg/demo-1/js/rAF.js"></script>
    <script src="https://www.marcoguglie.it/Codepen/AnimatedHeaderBg/demo-1/js/TweenLite.min.js"></script>
    <link href='https://fonts.googleapis.com/css?family=Raleway:200,400,800' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="{% static 'css/demo.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'css/component.css' %}" />
    <script src="{% static 'js/snap.svg-min.js' %}"></script>
<style>
/* Header */
input:focus {
    outline:none;
}
::placeholder { /* Most modern browsers support this now. */
   color:    #e5e5e5;
}
body{
    position: relative;
    width: 100%;
    background: #333;
    overflow: hidden;
    background-size: cover;
    background-position: center center;
}

body {
    background-image: url('../static/img/sky.jpg');
}

.main-title {
    position: absolute;
    margin: 0;
    padding: 0;
    color: #f9f1e9;
    text-align: center;
    top: 50%;
    left: 50%;
    -webkit-transform: translate3d(-50%,-50%,0);
    transform: translate3d(-50%,-50%,0);
}

.main-title {
    text-transform: uppercase;
}

.main-title .thin {
    font-weight: 200;
}

@media only screen and (max-width : 768px) {
    .main-title {
        font-size: 3em;
    }
}
#earth {
  position: relative;
  width: 300px;
  height: 300px;
  margin: 3em auto;
  background: url(../static/img/earthmap.jpg) 0 0 repeat;
  border-radius: 50%;
  border:1px solid #9ecaed;
  background-size: 630px;
  animation: rotate 8s linear infinite;
  transition: transform 200ms linear;
  transform-style: preserve-3d;
  box-shadow: inset 20px 0 80px 6px rgba(0, 0, 0, 1);
  color: #000;
  box-shadow: 0 0 30px 3px #9ecaed;
}

#earth:after {
  content: "";
  position: absolute;
  top: 0%;
  left: 0%;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  box-shadow: -80px 15px 80px 10px rgba(0,0,0,.9) inset;
}

#earth:before {
  content: "";
  position: absolute;
  border-radius: 50%;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  opacity: 0.2;
  background: radial-gradient(circle at 100px 100px, #fff, #000);
}
@keyframes rotate {
  0% {background-position: 0 0;}
  100% {background-position: 630px 0;}
}
.signin {
    background-color:rgba(229,229,229,0) !important;
    color:#e5e5e5;
    width:40%;
}
.signin:hover {
    background-color: white !important;
}
.help {
    background-color:rgba(229,229,229,0) !important;
    color:#e5e5e5;
    margin-left:2%;
    width:52%;
}
.help:hover {
    background-color: #ed5588 !important;
    border:1px solid #ed5588;
    color:white;
} 
</style>
</head>
<div style="position:relative;" class="col-md-12" id="large-header">
<div class="col-md-4" style="margin-top:13%;z-index:100;position:absolute;" id="earth"></div>
<h1 style="margin-left:-4%;z-index:100;" class="col-md-4 main-title"><span style="vertical-align:11px;">Feedback</span> <span style="font-size:2em;color:#4ca64c;" class="thin">360</span></h1>
<div class="col-md-4 aitsloginwthree w3layouts agileits" style="margin-top:15%;padding-top:10%;padding-bottom:1%;float:right;background-color: rgba(250,250,250, 0.3);z-index:1000;border-radius:5%;">
    <div style="left:0;top:3%;position: absolute;" class="col-md-4">
    <img style="padding:10%;" width="100" src="https://bmsit.ac.in/assets/logo-167a1e45069e8f279b09630a9bff0d35e6cba7f016a24651e39a40dc422e9dc1.png"></div>
    <div style="top:3%;left:27%;position:absolute;padding:2%;" class="col-md-8">
    <h3 style="color:#e5e5e5;text-align: center;">BMS INSTITUTE OF TECHNOLOGY</h3>
</div>
    <form style="margin-left:3%;margin-top:3%;" action="#" method="post" onsubmit="return checkForm(this);">{% csrf_token %}
        <input style="color:white;background:none;border:none;border-bottom:1px solid #e5e5e5;margin-bottom:2%;width:93%;font-size:120%;" type="text" name="usn1" id="usn" placeholder="Enter USN">
        <div style="margin-top:2%;" class="send-button wthree agileits">
            <input type="submit" name="myButton" class="btn btn-default btn-lg signin" value="Sign In">
            <a class="btn btn-default btn-lg help" data-toggle="modal" data-target="#cbModal">Need Help?</a>
            <p style="padding-top: 10%;"><a style="color:#e5e5e5;text-decoration:underline;" href="https://docs.google.com/spreadsheets/d/1G3tACUwyzig8I-8X6jw8LEh27Wu1rP4Dd_do5zL_M-M/edit#gid=0" target="blank">List of USN for 1st year students</a></p>
        </div>
    </form>
</div>
<canvas style="position:absolute;z-index:-100;" id="demo-canvas"></canvas>
</div>
<footer style="position:fixed;bottom:0;" class="page-footer fixed-bottom center-on-small-only footer-main">
        <div class="container-fluid">
            <h5><strong><center><span style="color:white;">A product by</span><a style="color:#ffc05b;" href="https://infoniumlabs.site" target="blank"> DevX<img id="logo" src="{% static 'img/logo2.png' %}" style="width:50px; vertical-align: middle; margin-top: -5px;"></a></center></strong></h5>
        </div>
    </footer>
<div id="loader" class="pageload-overlay" data-opening="M20,15 50,30 50,30 30,30 Z;M0,0 80,0 50,30 20,45 Z;M0,0 80,0 60,45 0,60 Z;M0,0 80,0 80,60 0,60 Z" data-closing="M0,0 80,0 60,45 0,60 Z;M0,0 80,0 50,30 20,45 Z;M20,15 50,30 50,30 30,30 Z;M30,30 50,30 50,30 30,30 Z">
    <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 80 60" preserveAspectRatio="none">
        <path d="M30,30 50,30 50,30 30,30 Z"/>
    </svg>
</div>
<script src="{% static 'js/classie.js' %}"></script>
<script src="{% static 'js/svgLoader.js' %}"></script>
<script>
    (function() {

    var width, height, largeHeader, canvas, ctx, points, target, animateHeader = true;

    // Main
    initHeader();
    initAnimation();
    addListeners();

    function initHeader() {
        width = window.innerWidth;
        height = window.innerHeight;
        target = {x: width/2, y: height/2};

        largeHeader = document.getElementById('large-header');
        largeHeader.style.height = height+'px';

        canvas = document.getElementById('demo-canvas');
        canvas.width = width;
        canvas.height = height;
        ctx = canvas.getContext('2d');

        // create points
        points = [];
        for(var x = 0; x < width; x = x + width/20) {
            for(var y = 0; y < height; y = y + height/20) {
                var px = x + Math.random()*width/20;
                var py = y + Math.random()*height/20;
                var p = {x: px, originX: px, y: py, originY: py };
                points.push(p);
            }
        }

        // for each point find the 5 closest points
        for(var i = 0; i < points.length; i++) {
            var closest = [];
            var p1 = points[i];
            for(var j = 0; j < points.length; j++) {
                var p2 = points[j]
                if(!(p1 == p2)) {
                    var placed = false;
                    for(var k = 0; k < 5; k++) {
                        if(!placed) {
                            if(closest[k] == undefined) {
                                closest[k] = p2;
                                placed = true;
                            }
                        }
                    }

                    for(var k = 0; k < 5; k++) {
                        if(!placed) {
                            if(getDistance(p1, p2) < getDistance(p1, closest[k])) {
                                closest[k] = p2;
                                placed = true;
                            }
                        }
                    }
                }
            }
            p1.closest = closest;
        }

        // assign a circle to each point
        for(var i in points) {
            var c = new Circle(points[i], 2+Math.random()*2, 'rgba(255,255,255,0.3)');
            points[i].circle = c;
        }
    }

    // Event handling
    function addListeners() {
        if(!('ontouchstart' in window)) {
            window.addEventListener('mousemove', mouseMove);
        }
        window.addEventListener('scroll', scrollCheck);
        window.addEventListener('resize', resize);
    }

    function mouseMove(e) {
        var posx = posy = 0;
        if (e.pageX || e.pageY) {
            posx = e.pageX;
            posy = e.pageY;
        }
        else if (e.clientX || e.clientY)    {
            posx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;
            posy = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;
        }
        target.x = posx;
        target.y = posy;
    }

    function scrollCheck() {
        if(document.body.scrollTop > height) animateHeader = false;
        else animateHeader = true;
    }

    function resize() {
        width = window.innerWidth;
        height = window.innerHeight;
        largeHeader.style.height = height+'px';
        canvas.width = width;
        canvas.height = height;
    }

    // animation
    function initAnimation() {
        animate();
        for(var i in points) {
            shiftPoint(points[i]);
        }
    }

    function animate() {
        if(animateHeader) {
            ctx.clearRect(0,0,width,height);
            for(var i in points) {
                // detect points in range
                if(Math.abs(getDistance(target, points[i])) < 4000) {
                    points[i].active = 0.3;
                    points[i].circle.active = 0.6;
                } else if(Math.abs(getDistance(target, points[i])) < 20000) {
                    points[i].active = 0.1;
                    points[i].circle.active = 0.3;
                } else if(Math.abs(getDistance(target, points[i])) < 40000) {
                    points[i].active = 0.02;
                    points[i].circle.active = 0.1;
                } else {
                    points[i].active = 0;
                    points[i].circle.active = 0;
                }

                drawLines(points[i]);
                points[i].circle.draw();
            }
        }
        requestAnimationFrame(animate);
    }

    function shiftPoint(p) {
        TweenLite.to(p, 1+1*Math.random(), {x:p.originX-50+Math.random()*100,
            y: p.originY-50+Math.random()*100, ease:Circ.easeInOut,
            onComplete: function() {
                shiftPoint(p);
            }});
    }

    // Canvas manipulation
    function drawLines(p) {
        if(!p.active) return;
        for(var i in p.closest) {
            ctx.beginPath();
            ctx.moveTo(p.x, p.y);
            ctx.lineTo(p.closest[i].x, p.closest[i].y);
            ctx.strokeStyle = 'rgba(156,217,249,'+ p.active+')';
            ctx.stroke();
        }
    }

    function Circle(pos,rad,color) {
        var _this = this;

        // constructor
        (function() {
            _this.pos = pos || null;
            _this.radius = rad || null;
            _this.color = color || null;
        })();

        this.draw = function() {
            if(!_this.active) return;
            ctx.beginPath();
            ctx.arc(_this.pos.x, _this.pos.y, _this.radius, 0, 2 * Math.PI, false);
            ctx.fillStyle = 'rgba(156,217,249,'+ _this.active+')';
            ctx.fill();
        };
    }

    // Util
    function getDistance(p1, p2) {
        return Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2);
    }
    
})();
    </script>
    <script>
            (function() {
                var pageWrap = document.getElementById( 'pagewrap' ),
                    pages = [].slice.call( pageWrap.querySelectorAll( 'div.container' ) ),
                    currentPage = 0,
                    triggerLoading = [].slice.call( pageWrap.querySelectorAll( 'a.pageload-link' ) ),
                    loader = new SVGLoader( document.getElementById( 'loader' ), { speedIn : 100 } );

                function init() {
                    triggerLoading.forEach( function( trigger ) {
                        trigger.addEventListener( 'click', function( ev ) {
                            ev.preventDefault();
                            loader.show();
                            // after some time hide loader
                            setTimeout( function() {
                                loader.hide();

                                classie.removeClass( pages[ currentPage ], 'show' );
                                // update..
                                currentPage = currentPage ? 0 : 1;
                                classie.addClass( pages[ currentPage ], 'show' );

                            }, 2000 );
                        } );
                    } );    
                }

                init();
            })();
        </script>